# 📘 H∞制御設計ノート – 外乱抑制とロバスト性の設計知見

このドキュメントでは、AITL-Hにおける物理層制御の高度展開として、**H∞制御（H-infinity Control）**の理論的背景と設計指針を整理します。  
特に外乱抑制やモデル誤差に対するロバスト性が要求される場面に有効です。

---

## 🎯 1. H∞制御とは

H∞制御は「**最悪のケースに対して最も良い制御性能を達成する**」という**ミニマックス原理**に基づいた制御手法です。  
システムへの外乱 \( d \) に対して、出力 \( y \) を以下の性能関数で抑制します：

\[
\|T_{y,d}\|_\infty < \gamma
\]

ここで \( \|T_{y,d}\|_\infty \) は外乱から出力への伝達関数の**最大ゲイン**（L2ノルム）を意味します。

---

## 📐 2. AITL-Hにおける利用シーン

- 姿勢制御における突発的な衝撃対応（例：転倒防止）
- モデル不確かさを含むシステム（例：歩行時の地面摩擦変動）
- 音声発話中の制御精度維持（例：喉の振動が機構に影響）

---

## 🔧 3. モデル構築と設計手順

1. **状態空間モデル構築**
    - 入力：制御信号 \( u \)、外乱 \( d \)
    - 出力：制御対象 \( y \)、性能出力 \( z \)
2. **加重関数設計**
    - 応答性や抑制対象に合わせて \( W_1, W_2 \) を設定
3. **LMI（線形行列不等式）を解く**
    - MATLAB, Pythonの`cvxpy`等を用いて γ < γ_max を満たす制御器を構成

---

## 📂 推奨ファイル構成（例）

- `hinf_controller.py`：状態空間からの H∞制御器生成
- `plant_model.py`：システムのモデル記述
- `weighting_functions.py`：加重関数の設定
- `test_response.ipynb`：制御応答の比較とシミュレーション

---

## 🛠 設計時の注意点

- 高次モデルではLMI解が不安定になる → モデル簡略化が必要
- 加重関数が不適切だと**過大ゲイン**になる → バンド制限やノイズ対策を考慮
- PIDとの**切替制御戦略**も現実的（例：通常時PID、異常時にH∞）

---

## 🚀 応用展開

| 技術 | 内容 | 応用例 |
|------|------|--------|
| μ解析 | 不確かさの構造的解析 | 製造バラつき、部品摩耗 |
| 制約付きH∞制御 | 制御入力の上限制約 | 電源電圧制約、温度上昇制限 |
| LPV制御 | パラメータ変化に対応 | 関節負荷、地形変化に応じた補正 |

---

## ✍️ 制作者より

AITL-Hは**人間に近い動き**を目指す上で、単なるPIDでは捉えきれない不確定性や複雑性に直面します。  
H∞制御はそのような**厳しい環境下でも安定性と性能を保証する強力な手法**であり、PoCからSystemDK展開においても活用すべきです。

---
